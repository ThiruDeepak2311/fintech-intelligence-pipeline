{"ast":null,"code":"// Real API integration with Railway backend\nconst API_BASE_URL = 'https://fintech-intelligence-pipeline-production.up.railway.app';\nclass DatabaseService {\n  constructor() {\n    console.log('DatabaseService initialized with real API:', API_BASE_URL);\n  }\n  async getLatestStockData() {\n    try {\n      console.log('Fetching latest stock data from API...');\n      const response = await fetch(`${API_BASE_URL}/api/latest`);\n      if (!response.ok) {\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n      }\n      const data = await response.json();\n      console.log('Latest stock data received:', data);\n\n      // Return in the format expected by React components\n      return {\n        id: data.id || 1,\n        date: data.date,\n        symbol: data.symbol,\n        stockData: data.stockData,\n        aiAnalysis: data.aiAnalysis\n      };\n    } catch (error) {\n      console.error('Error fetching latest stock data:', error);\n      // Return fallback data if API fails\n      return this.getFallbackLatestData();\n    }\n  }\n  async getHistoricalData(days = 30) {\n    try {\n      console.log('Fetching historical data from API...');\n      const response = await fetch(`${API_BASE_URL}/api/historical`);\n      if (!response.ok) {\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n      }\n      const data = await response.json();\n      console.log('Historical data received:', data.length, 'records');\n      return data;\n    } catch (error) {\n      console.error('Error fetching historical data:', error);\n      return this.getFallbackHistoricalData();\n    }\n  }\n  async getAllRecommendations() {\n    try {\n      console.log('Fetching recommendations from API...');\n      const response = await fetch(`${API_BASE_URL}/api/recommendations`);\n      if (!response.ok) {\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n      }\n      const data = await response.json();\n      console.log('Recommendations received:', data.length, 'records');\n      return data;\n    } catch (error) {\n      console.error('Error fetching recommendations:', error);\n      return this.getFallbackRecommendations();\n    }\n  }\n  async getPerformanceMetrics() {\n    try {\n      console.log('Fetching performance metrics from API...');\n      const response = await fetch(`${API_BASE_URL}/api/metrics`);\n      if (!response.ok) {\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n      }\n      const data = await response.json();\n      console.log('Performance metrics received:', data);\n      return data;\n    } catch (error) {\n      console.error('Error fetching performance metrics:', error);\n      return this.getFallbackMetrics();\n    }\n  }\n\n  // Fallback data methods (in case API is down)\n  getFallbackLatestData() {\n    return {\n      id: 1,\n      date: '2025-09-12',\n      symbol: 'AAPL',\n      stockData: {\n        open: 229.22,\n        close: 234.07,\n        high: 234.51,\n        low: 229.02,\n        volume: 55824216,\n        vwap: 231.5,\n        transactions: 850000,\n        change: 4.85,\n        changePercent: 2.12\n      },\n      aiAnalysis: {\n        sentiment: 'bullish',\n        riskScore: 6,\n        pricePrediction: 235.0,\n        recommendations: ['Buy AAPL due to strong quarterly earnings', 'AAPL is a good long-term investment opportunity', 'The recent price increase is a buying signal'],\n        analysis: 'AAPL shows strong momentum, expect continued growth',\n        model: 'meta-llama/llama-3.2-3b-instruct:free'\n      }\n    };\n  }\n  getFallbackHistoricalData() {\n    return [{\n      date: '2025-09-10',\n      open: 232.185,\n      close: 226.79,\n      high: 232.42,\n      low: 225.95,\n      volume: 83440810,\n      vwap: 229.6\n    }, {\n      date: '2025-09-11',\n      open: 226.875,\n      close: 230.03,\n      high: 230.45,\n      low: 226.65,\n      volume: 50208578,\n      vwap: 228.5\n    }, {\n      date: '2025-09-12',\n      open: 229.22,\n      close: 234.07,\n      high: 234.51,\n      low: 229.02,\n      volume: 55824216,\n      vwap: 231.5\n    }];\n  }\n  getFallbackRecommendations() {\n    return [{\n      date: '2025-09-12',\n      symbol: 'AAPL',\n      sentiment: 'bullish',\n      riskScore: 6,\n      pricePrediction: 235.0,\n      actualPrice: 234.07,\n      recommendations: ['Buy AAPL due to strong quarterly earnings', 'Good long-term investment'],\n      changePercent: 2.12,\n      predictionAccuracy: 99.6\n    }];\n  }\n  getFallbackMetrics() {\n    return {\n      totalDaysAnalyzed: 7,\n      totalRecommendations: 7,\n      sentimentDistribution: {\n        bullish: 4,\n        bearish: 3\n      },\n      averageRiskScore: 6.43,\n      priceMetrics: {\n        minPrice: 226.79,\n        maxPrice: 234.07,\n        avgPrice: 230.3,\n        avgVolume: 63157868\n      }\n    };\n  }\n}\nconst databaseService = new DatabaseService();\nexport default databaseService;","map":{"version":3,"names":["API_BASE_URL","DatabaseService","constructor","console","log","getLatestStockData","response","fetch","ok","Error","status","statusText","data","json","id","date","symbol","stockData","aiAnalysis","error","getFallbackLatestData","getHistoricalData","days","length","getFallbackHistoricalData","getAllRecommendations","getFallbackRecommendations","getPerformanceMetrics","getFallbackMetrics","open","close","high","low","volume","vwap","transactions","change","changePercent","sentiment","riskScore","pricePrediction","recommendations","analysis","model","actualPrice","predictionAccuracy","totalDaysAnalyzed","totalRecommendations","sentimentDistribution","bullish","bearish","averageRiskScore","priceMetrics","minPrice","maxPrice","avgPrice","avgVolume","databaseService"],"sources":["C:/Users/Deepak Thirukkumaran/OneDrive/Desktop/stealth/finpipe/dashboard/src/services/database.js"],"sourcesContent":["// Real API integration with Railway backend\r\nconst API_BASE_URL = 'https://fintech-intelligence-pipeline-production.up.railway.app';\r\n\r\nclass DatabaseService {\r\n  constructor() {\r\n    console.log('DatabaseService initialized with real API:', API_BASE_URL);\r\n  }\r\n\r\n  async getLatestStockData() {\r\n    try {\r\n      console.log('Fetching latest stock data from API...');\r\n      const response = await fetch(`${API_BASE_URL}/api/latest`);\r\n      \r\n      if (!response.ok) {\r\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\r\n      }\r\n      \r\n      const data = await response.json();\r\n      console.log('Latest stock data received:', data);\r\n      \r\n      // Return in the format expected by React components\r\n      return {\r\n        id: data.id || 1,\r\n        date: data.date,\r\n        symbol: data.symbol,\r\n        stockData: data.stockData,\r\n        aiAnalysis: data.aiAnalysis\r\n      };\r\n    } catch (error) {\r\n      console.error('Error fetching latest stock data:', error);\r\n      // Return fallback data if API fails\r\n      return this.getFallbackLatestData();\r\n    }\r\n  }\r\n\r\n  async getHistoricalData(days = 30) {\r\n    try {\r\n      console.log('Fetching historical data from API...');\r\n      const response = await fetch(`${API_BASE_URL}/api/historical`);\r\n      \r\n      if (!response.ok) {\r\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\r\n      }\r\n      \r\n      const data = await response.json();\r\n      console.log('Historical data received:', data.length, 'records');\r\n      \r\n      return data;\r\n    } catch (error) {\r\n      console.error('Error fetching historical data:', error);\r\n      return this.getFallbackHistoricalData();\r\n    }\r\n  }\r\n\r\n  async getAllRecommendations() {\r\n    try {\r\n      console.log('Fetching recommendations from API...');\r\n      const response = await fetch(`${API_BASE_URL}/api/recommendations`);\r\n      \r\n      if (!response.ok) {\r\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\r\n      }\r\n      \r\n      const data = await response.json();\r\n      console.log('Recommendations received:', data.length, 'records');\r\n      \r\n      return data;\r\n    } catch (error) {\r\n      console.error('Error fetching recommendations:', error);\r\n      return this.getFallbackRecommendations();\r\n    }\r\n  }\r\n\r\n  async getPerformanceMetrics() {\r\n    try {\r\n      console.log('Fetching performance metrics from API...');\r\n      const response = await fetch(`${API_BASE_URL}/api/metrics`);\r\n      \r\n      if (!response.ok) {\r\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\r\n      }\r\n      \r\n      const data = await response.json();\r\n      console.log('Performance metrics received:', data);\r\n      \r\n      return data;\r\n    } catch (error) {\r\n      console.error('Error fetching performance metrics:', error);\r\n      return this.getFallbackMetrics();\r\n    }\r\n  }\r\n\r\n  // Fallback data methods (in case API is down)\r\n  getFallbackLatestData() {\r\n    return {\r\n      id: 1,\r\n      date: '2025-09-12',\r\n      symbol: 'AAPL',\r\n      stockData: {\r\n        open: 229.22,\r\n        close: 234.07,\r\n        high: 234.51,\r\n        low: 229.02,\r\n        volume: 55824216,\r\n        vwap: 231.5,\r\n        transactions: 850000,\r\n        change: 4.85,\r\n        changePercent: 2.12\r\n      },\r\n      aiAnalysis: {\r\n        sentiment: 'bullish',\r\n        riskScore: 6,\r\n        pricePrediction: 235.0,\r\n        recommendations: [\r\n          'Buy AAPL due to strong quarterly earnings',\r\n          'AAPL is a good long-term investment opportunity',\r\n          'The recent price increase is a buying signal'\r\n        ],\r\n        analysis: 'AAPL shows strong momentum, expect continued growth',\r\n        model: 'meta-llama/llama-3.2-3b-instruct:free'\r\n      }\r\n    };\r\n  }\r\n\r\n  getFallbackHistoricalData() {\r\n    return [\r\n      { date: '2025-09-10', open: 232.185, close: 226.79, high: 232.42, low: 225.95, volume: 83440810, vwap: 229.6 },\r\n      { date: '2025-09-11', open: 226.875, close: 230.03, high: 230.45, low: 226.65, volume: 50208578, vwap: 228.5 },\r\n      { date: '2025-09-12', open: 229.22, close: 234.07, high: 234.51, low: 229.02, volume: 55824216, vwap: 231.5 }\r\n    ];\r\n  }\r\n\r\n  getFallbackRecommendations() {\r\n    return [\r\n      {\r\n        date: '2025-09-12',\r\n        symbol: 'AAPL',\r\n        sentiment: 'bullish',\r\n        riskScore: 6,\r\n        pricePrediction: 235.0,\r\n        actualPrice: 234.07,\r\n        recommendations: ['Buy AAPL due to strong quarterly earnings', 'Good long-term investment'],\r\n        changePercent: 2.12,\r\n        predictionAccuracy: 99.6\r\n      }\r\n    ];\r\n  }\r\n\r\n  getFallbackMetrics() {\r\n    return {\r\n      totalDaysAnalyzed: 7,\r\n      totalRecommendations: 7,\r\n      sentimentDistribution: { bullish: 4, bearish: 3 },\r\n      averageRiskScore: 6.43,\r\n      priceMetrics: {\r\n        minPrice: 226.79,\r\n        maxPrice: 234.07,\r\n        avgPrice: 230.3,\r\n        avgVolume: 63157868\r\n      }\r\n    };\r\n  }\r\n}\r\n\r\nconst databaseService = new DatabaseService();\r\nexport default databaseService;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}